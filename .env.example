# YouWorker.AI Environment Configuration Example
# Copy this file to .env and fill in your values
# IMPORTANT: Never commit .env to git! It contains secrets.
# Generated: 2025-10-27

# ============================================================================
# Ollama Configuration
# ============================================================================
OLLAMA_BASE_URL=http://ollama:11434
CHAT_MODEL=gpt-oss:20b
EMBED_MODEL=embeddinggemma:300m

# ============================================================================
# Qdrant Vector Store Configuration
# ============================================================================
QDRANT_URL=http://qdrant:6333
QDRANT_COLLECTION=documents
EMBEDDING_DIM=768

# ============================================================================
# MCP Server URLs (comma-separated)
# ============================================================================
MCP_SERVER_URLS=http://mcp_web:7001,http://mcp_semantic:7002,http://mcp_datetime:7003,http://mcp_ingest:7004,http://mcp_units:7005
MCP_REFRESH_INTERVAL=300

# ============================================================================
# API Configuration
# ============================================================================
APP_ENV=production
API_HOST=0.0.0.0
API_PORT=8001
LOG_LEVEL=INFO

# CORS Origins (comma-separated, must be full URLs with scheme)
# Replace with your actual frontend URLs
FRONTEND_ORIGIN=http://localhost:8000,http://127.0.0.1:8000

# Security: Whitelist client IPs for on-premise access (comma-separated)
# Replace with your actual client IP addresses
WHITELISTED_IPS=127.0.0.1,YOUR_CLIENT_IP_HERE

# ============================================================================
# SECURITY: API Keys and Secrets
# ============================================================================
# CRITICAL: Generate strong, unique secrets before deployment!
# Use: openssl rand -hex 32
#
# ROOT_API_KEY: Master API key for backend access
# Generate with: openssl rand -hex 32
ROOT_API_KEY=REPLACE_WITH_GENERATED_KEY

# JWT_SECRET: Secret for JWT token signing (should be different from ROOT_API_KEY)
# Generate with: openssl rand -hex 32
JWT_SECRET=REPLACE_WITH_GENERATED_KEY

# AUTHENTIK SSO
# Enable Authentik integration and define the header that carries the API key.
# The header name should be lowercase and match the value configured in Authentik.
AUTHENTIK_ENABLED=true
AUTHENTIK_HEADER_NAME=x-authentik-api-key
# Optional: forward Authentik username to display in the UI (e.g. x-authentik-username)
AUTHENTIK_FORWARD_USER_HEADER=x-authentik-username

# ============================================================================
# Database Configuration
# ============================================================================
POSTGRES_USER=youworker
# Generate with: openssl rand -hex 32
POSTGRES_PASSWORD=REPLACE_WITH_GENERATED_PASSWORD
POSTGRES_DB=youworker
DATABASE_URL=postgresql+asyncpg://youworker:REPLACE_WITH_GENERATED_PASSWORD@postgres:5432/youworker

# ============================================================================
# Ingestion Configuration
# ============================================================================
INGEST_UPLOAD_ROOT=/data/uploads
INGEST_ACCELERATOR=auto
INGEST_GPU_DEVICE=cuda
MAX_AGENT_ITERATIONS=50

# ============================================================================
# STT (Speech-to-Text) Configuration
# ============================================================================
STT_MODEL=small
STT_DEVICE=cuda
STT_COMPUTE_TYPE=float16
STT_BEAM_SIZE=1
STT_LANGUAGE=it

# ============================================================================
# TTS (Text-to-Speech) Configuration
# ============================================================================
TTS_PROVIDER=piper
TTS_VOICE=it_IT-paola-medium
TTS_MODEL_DIR=/app/models/tts

# ============================================================================
# Frontend Configuration
# ============================================================================
# NOTE: NEXT_PUBLIC_* variables are exposed to the browser
# DO NOT put secrets in NEXT_PUBLIC_* variables!
# Replace with your actual domain/IP
NEXT_PUBLIC_API_BASE_URL=http://localhost:8000
NEXT_PUBLIC_API_PORT=8000
NEXT_INTERNAL_API_BASE_URL=http://api:8001

# ============================================================================
# GPU Configuration
# ============================================================================
ENABLE_GPU_TORCH=1

# ============================================================================
# PRODUCTION DEPLOYMENT CHECKLIST
# ============================================================================
# Before deploying to production:
# 1. [ ] Generate all secrets using: openssl rand -hex 32
# 2. [ ] Update WHITELISTED_IPS with your client IPs
# 3. [ ] Update FRONTEND_ORIGIN with your domain
# 4. [ ] Update NEXT_PUBLIC_API_BASE_URL with your domain
# 5. [ ] Set APP_ENV=production
# 6. [ ] Verify DATABASE_URL password matches POSTGRES_PASSWORD
# 7. [ ] Review and update firewall rules
# 8. [ ] Set up SSL certificates (see scripts/generate-ssl-cert.sh)
# 9. [ ] Configure automated backups (see ops/scripts/backup-database.sh)
# 10. [ ] Test authentication and IP whitelisting
